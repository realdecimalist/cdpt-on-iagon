{"ast":null,"code":"import l from \"../../store/useStore.js\";\nimport { server as A } from \"../../config/axios.js\";\nimport { roundNumber as F } from \"../../utils/formatNumber.js\";\nimport \"react\";\nimport \"../../_commonjsHelpers-10dfc225.js\";\nimport \"../../index-9d43cc8b.js\";\nimport \"../../store/createTokenSearchSlice.js\";\nimport \"../../immer-548168ec.js\";\nimport \"../../store/createWalletSlice.js\";\nimport \"../../store/createSwapSettingsSlice.js\";\nimport \"../../store/createGlobalSettingsSlice.js\";\nimport \"../../store/createUserOrdersSlice.js\";\nimport \"../../store/createSwapSlice.js\";\nimport \"../../store/createChartSlice.js\";\nimport \"../../store/createBasketSlice.js\";\nimport \"../components/tokens.js\";\nimport \"../../store/createModalWhatsNewSlice.js\";\nimport \"../../store/createSwapParamsSlice.js\";\nimport \"../../index-ca8eb9e1.js\";\nimport \"../../axios-ddd885c5.js\";\nimport \"../../config/decrypt.js\";\nconst R = () => {\n  const {\n      tokenSell: e,\n      sellAmount: c,\n      setIsTokenPriceLoading: d,\n      setSwapDetails: _,\n      setIsSwapDetailsLoading: i,\n      setEstimationError: r,\n      isTransactionLoading: f,\n      swapDetails: a,\n      setBuyAmount: y,\n      limitPrice: g,\n      limitMultiples: L\n    } = l(o => o.swapSlice),\n    {\n      userAddress: S,\n      balance: w\n    } = l(o => o.walletSlice),\n    h = () => {\n      const o = a.total_fee + a.partner_fee,\n        s = parseFloat(c);\n      return s + o > w && (e == null ? void 0 : e.token_id) === \"\" ? parseFloat(s - o) : parseFloat(s);\n    };\n  return {\n    estimateStopLoss: async _ref => {\n      let {\n        signal: o\n      } = _ref;\n      var p, n, m, u;\n      if (f) return !0;\n      d(!0), i(!0);\n      const s = {\n        user_address: S,\n        token_in: e == null ? void 0 : e.token_id,\n        amount: h(),\n        price: parseFloat(g),\n        chunks: L || 1,\n        max_price_change: 0.5\n      };\n      try {\n        const {\n          data: t\n        } = await A.post(\"/stoploss/estimate\", s, {\n          signal: o\n        });\n        t.splits = [], t.expected_output = t.expected_output_without_slippage || 0, _(t), r(\"\"), y(F(t.total_output));\n      } catch (t) {\n        if (console.log(t), t.name === \"AbortError\") return !0;\n        ((p = t.response) == null ? void 0 : p.data) === \"pool_out_of_sync\" && r(\"Pools Out Of Sync\"), ((n = t.response) == null ? void 0 : n.data) === \"not_enough_liquidity\" && r(\"Not Enough Liquidity\"), ((m = t.response) == null ? void 0 : m.data) === \"pool_not_found\" && r(\"Pool Not Found\"), ((u = t.response) == null ? void 0 : u.data) === \"input_too_small\" && r(\"Input Too Small\");\n      } finally {\n        i(!1);\n      }\n      return !0;\n    }\n  };\n};\nexport { R as useEstimateStopLoss };","map":{"version":3,"names":["l","server","A","roundNumber","F","R","tokenSell","e","sellAmount","c","setIsTokenPriceLoading","d","setSwapDetails","_","setIsSwapDetailsLoading","i","setEstimationError","r","isTransactionLoading","f","swapDetails","a","setBuyAmount","y","limitPrice","g","limitMultiples","L","o","swapSlice","userAddress","S","balance","w","walletSlice","h","total_fee","partner_fee","s","parseFloat","token_id","estimateStopLoss","_ref","signal","p","n","m","u","user_address","token_in","amount","price","chunks","max_price_change","data","t","post","splits","expected_output","expected_output_without_slippage","total_output","console","log","name","response","useEstimateStopLoss"],"sources":["D:/fluxPoint/Development/cDPT/cdpt-on-iagon/node_modules/@dexhunterio/swaps/lib/swap/hooks/useStopLossEstimation.js"],"sourcesContent":["import l from \"../../store/useStore.js\";\nimport { server as A } from \"../../config/axios.js\";\nimport { roundNumber as F } from \"../../utils/formatNumber.js\";\nimport \"react\";\nimport \"../../_commonjsHelpers-10dfc225.js\";\nimport \"../../index-9d43cc8b.js\";\nimport \"../../store/createTokenSearchSlice.js\";\nimport \"../../immer-548168ec.js\";\nimport \"../../store/createWalletSlice.js\";\nimport \"../../store/createSwapSettingsSlice.js\";\nimport \"../../store/createGlobalSettingsSlice.js\";\nimport \"../../store/createUserOrdersSlice.js\";\nimport \"../../store/createSwapSlice.js\";\nimport \"../../store/createChartSlice.js\";\nimport \"../../store/createBasketSlice.js\";\nimport \"../components/tokens.js\";\nimport \"../../store/createModalWhatsNewSlice.js\";\nimport \"../../store/createSwapParamsSlice.js\";\nimport \"../../index-ca8eb9e1.js\";\nimport \"../../axios-ddd885c5.js\";\nimport \"../../config/decrypt.js\";\nconst R = () => {\n  const {\n    tokenSell: e,\n    sellAmount: c,\n    setIsTokenPriceLoading: d,\n    setSwapDetails: _,\n    setIsSwapDetailsLoading: i,\n    setEstimationError: r,\n    isTransactionLoading: f,\n    swapDetails: a,\n    setBuyAmount: y,\n    limitPrice: g,\n    limitMultiples: L\n  } = l((o) => o.swapSlice), { userAddress: S, balance: w } = l((o) => o.walletSlice), h = () => {\n    const o = a.total_fee + a.partner_fee, s = parseFloat(c);\n    return s + o > w && (e == null ? void 0 : e.token_id) === \"\" ? parseFloat(s - o) : parseFloat(s);\n  };\n  return { estimateStopLoss: async ({ signal: o }) => {\n    var p, n, m, u;\n    if (f)\n      return !0;\n    d(!0), i(!0);\n    const s = {\n      user_address: S,\n      token_in: e == null ? void 0 : e.token_id,\n      amount: h(),\n      price: parseFloat(g),\n      chunks: L || 1,\n      max_price_change: 0.5\n    };\n    try {\n      const { data: t } = await A.post(\"/stoploss/estimate\", s, {\n        signal: o\n      });\n      t.splits = [], t.expected_output = t.expected_output_without_slippage || 0, _(t), r(\"\"), y(F(t.total_output));\n    } catch (t) {\n      if (console.log(t), t.name === \"AbortError\")\n        return !0;\n      ((p = t.response) == null ? void 0 : p.data) === \"pool_out_of_sync\" && r(\"Pools Out Of Sync\"), ((n = t.response) == null ? void 0 : n.data) === \"not_enough_liquidity\" && r(\"Not Enough Liquidity\"), ((m = t.response) == null ? void 0 : m.data) === \"pool_not_found\" && r(\"Pool Not Found\"), ((u = t.response) == null ? void 0 : u.data) === \"input_too_small\" && r(\"Input Too Small\");\n    } finally {\n      i(!1);\n    }\n    return !0;\n  } };\n};\nexport {\n  R as useEstimateStopLoss\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}